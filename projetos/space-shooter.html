<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Space Shooter - Jogo React | Dev Brayan - Portfolio</title>
    <meta name="title" content="Space Shooter - Jogo React | Dev Brayan">
    <meta name="description" content="Jogue Space Shooter, um jogo de tiro espacial desenvolvido em React. Controle sua nave, elimine inimigos, colete power-ups e alcance a maior pontua√ß√£o. Desenvolvido por Dev Brayan.">
    <meta name="description:en" content="Play Space Shooter, a space shooting game developed in React. Control your ship, eliminate enemies, collect power-ups and reach the highest score. Developed by Dev Brayan.">
    <meta name="keywords" content="Space Shooter, Jogo React, Game React, Space Game, Shooting Game, React Game, Dev Brayan, Brayan Silveira, Portfolio Game, Interactive Game, Browser Game, HTML5 Game, Canvas Game, JavaScript Game, React Developer, Game Developer, Web Game, Online Game, Free Game, Play Game">
    <meta name="author" content="Brayan Rosa da Silveira - Dev Brayan">
    <meta name="robots" content="index, follow">
    <meta name="language" content="Portuguese, English">
    
    <!-- Multilingual Support -->
    <link rel="alternate" hreflang="pt-BR" href="https://brayansilver.github.io/projetos/space-shooter.html">
    <link rel="alternate" hreflang="en" href="https://brayansilver.github.io/projetos/space-shooter.html">
    <link rel="alternate" hreflang="x-default" href="https://brayansilver.github.io/projetos/space-shooter.html">
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Space Shooter - Jogo React | Dev Brayan">
    <meta property="og:description" content="Jogue Space Shooter, um jogo de tiro espacial desenvolvido em React. Desenvolvido por Dev Brayan.">
    <meta property="og:locale" content="pt_BR">
    <meta property="og:locale:alternate" content="en_US">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Space Shooter - Jogo React | Dev Brayan">
    <meta name="twitter:description" content="Jogue Space Shooter, um jogo de tiro espacial desenvolvido em React.">
    
    <!-- Performance Optimizations -->
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Load fonts asynchronously -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet"></noscript>
    
    <!-- Load React and dependencies in correct order -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Press Start 2P', cursive;
            touch-action: none;
            overflow: hidden;
        }
        #root {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }
        canvas {
            max-width: 100%;
            max-height: 100vh;
            width: auto !important;
            height: auto !important;
        }
        @media (max-width: 768px) {
            canvas {
                width: 100vw !important;
                height: auto !important;
            }
        }
        .touch-controls {
            position: fixed;
            bottom: 20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 100;
            pointer-events: none;
        }
        .touch-controls button {
            pointer-events: all;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid white;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        .touch-controls .dpad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 2px;
            width: 180px;
            height: 180px;
        }
        .touch-controls .dpad button {
            width: 58px;
            height: 58px;
            border-radius: 8px;
        }
        .touch-controls .dpad .up { grid-column: 2; grid-row: 1; }
        .touch-controls .dpad .left { grid-column: 1; grid-row: 2; }
        .touch-controls .dpad .down { grid-column: 2; grid-row: 3; }
        .touch-controls .dpad .right { grid-column: 3; grid-row: 2; }
        @media (min-width: 769px) {
            .touch-controls {
                display: none;
            }
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body>
    <div id="root">
        <div id="loading-screen" style="display: flex; align-items: center; justify-content: center; height: 100vh; background: linear-gradient(to bottom right, #0f172a, #581c87, #0f172a); color: #00ffff; font-family: 'Press Start 2P', cursive; font-size: 12px;">
            <div style="text-align: center;">
                <div style="width: 50px; height: 50px; border: 4px solid rgba(0,255,255,0.3); border-top-color: #00ffff; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 1rem;"></div>
                <div>Carregando jogo...</div>
            </div>
        </div>
    </div>

    <script>
        // Hide loading screen when React is ready
        function hideLoading() {
            const loading = document.getElementById('loading-screen');
            if (loading) {
                loading.style.display = 'none';
            }
        }
    </script>

    <script type="text/babel">
        // Wait for dependencies to load
        function initGame() {
            if (typeof React === 'undefined' || typeof ReactDOM === 'undefined') {
                setTimeout(initGame, 50);
                return;
            }
        const { useState, useEffect, useRef, useCallback } = React;

        // √çcones SVG simples para substituir lucide-react
        const IconZap = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
        );

        const IconShield = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
            </svg>
        );

        const IconRocket = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
        );

        const IconStar = ({ className }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
            </svg>
        );

        const SpaceShooter = () => {
            const canvasRef = useRef(null);
            const gameLoopRef = useRef(null);
            const [gameState, setGameState] = useState('menu');
            const [score, setScore] = useState(0);
            const [highScore, setHighScore] = useState(0);
            const [lives, setLives] = useState(3);
            const [isMobile, setIsMobile] = useState(false);
            const [canvasSize, setCanvasSize] = useState({ width: 800, height: 600 });
            
            const gameRef = useRef({
                player: { x: 400, y: 500, width: 40, height: 40, speed: 6, invulnerable: 0 },
                bullets: [],
                enemies: [],
                asteroids: [],
                powerUps: [],
                particles: [],
                keys: {},
                powerUpActive: null,
                powerUpTimer: 0,
                doubleShotActive: false,
                shieldActive: false,
                enemySpawnTimer: 0,
                asteroidSpawnTimer: 0,
                powerUpSpawnTimer: 0,
            });

            // Detect mobile and adjust canvas size
            useEffect(() => {
                const checkMobile = () => {
                    const mobile = window.innerWidth <= 768;
                    setIsMobile(mobile);
                    if (mobile) {
                        const maxWidth = window.innerWidth - 40;
                        const aspectRatio = 800 / 600;
                        const width = Math.min(maxWidth, 600);
                        const height = width / aspectRatio;
                        setCanvasSize({ width, height });
                    } else {
                        setCanvasSize({ width: 800, height: 600 });
                    }
                };
                checkMobile();
                window.addEventListener('resize', checkMobile);
                return () => window.removeEventListener('resize', checkMobile);
            }, []);
            
            // Load high score from localStorage
            useEffect(() => {
                try {
                    const saved = localStorage.getItem('space-shooter-highscore');
                    if (saved) {
                        setHighScore(parseInt(saved));
                    }
                } catch (error) {
                    // Tracking Prevention or localStorage blocked
                    console.log('High score not available:', error.message);
                }
            }, []);

            // Save high score
            const saveHighScore = (score) => {
                try {
                    localStorage.setItem('space-shooter-highscore', score.toString());
                } catch (error) {
                    // Tracking Prevention or localStorage blocked - silently fail
                    console.log('High score save not available:', error.message);
                }
            };

            const startGame = () => {
                setGameState('playing');
                setScore(0);
                setLives(3);
                
                const game = gameRef.current;
                const canvas = canvasRef.current;
                const centerX = canvas ? canvas.width / 2 : 400;
                const startY = canvas ? canvas.height - 100 : 500;
                game.player = { x: centerX - 20, y: startY, width: 40, height: 40, speed: 6, invulnerable: 0 };
                game.bullets = [];
                game.enemies = [];
                game.asteroids = [];
                game.powerUps = [];
                game.particles = [];
                game.powerUpActive = null;
                game.powerUpTimer = 0;
                game.doubleShotActive = false;
                game.shieldActive = false;
                game.enemySpawnTimer = 0;
                game.asteroidSpawnTimer = 0;
                game.powerUpSpawnTimer = 0;
            };

            const createParticles = (x, y, color, count = 10) => {
                const game = gameRef.current;
                for (let i = 0; i < count; i++) {
                    game.particles.push({
                        x, y,
                        vx: (Math.random() - 0.5) * 8,
                        vy: (Math.random() - 0.5) * 8,
                        life: 30,
                        color,
                        size: Math.random() * 3 + 2
                    });
                }
            };

            const shoot = () => {
                const game = gameRef.current;
                const { player } = game;
                
                if (!player) return;
                
                if (game.doubleShotActive) {
                    game.bullets.push({
                        x: player.x + player.width / 2 - 10,
                        y: player.y,
                        width: 4,
                        height: 15,
                        speed: 10,
                        color: '#00ffff'
                    });
                    game.bullets.push({
                        x: player.x + player.width / 2 + 10,
                        y: player.y,
                        width: 4,
                        height: 15,
                        speed: 10,
                        color: '#00ffff'
                    });
                } else {
                    game.bullets.push({
                        x: player.x + player.width / 2,
                        y: player.y,
                        width: 4,
                        height: 15,
                        speed: 10,
                        color: '#00ffff'
                    });
                }
            };

            const spawnEnemy = () => {
                const game = gameRef.current;
                const canvas = canvasRef.current;
                const maxX = canvas ? canvas.width - 35 : 760;
                game.enemies.push({
                    x: Math.random() * maxX,
                    y: -40,
                    width: 35,
                    height: 35,
                    speed: 2 + Math.random() * 2,
                    health: 2,
                    shootTimer: Math.random() * 60
                });
            };

            const spawnAsteroid = () => {
                const game = gameRef.current;
                const canvas = canvasRef.current;
                const size = 30 + Math.random() * 30;
                const maxX = canvas ? canvas.width - size : 760;
                game.asteroids.push({
                    x: Math.random() * maxX,
                    y: -60,
                    width: size,
                    height: size,
                    speed: 1 + Math.random() * 2,
                    rotation: Math.random() * Math.PI * 2,
                    rotationSpeed: (Math.random() - 0.5) * 0.1
                });
            };

            const spawnPowerUp = () => {
                const game = gameRef.current;
                const canvas = canvasRef.current;
                const types = ['doubleShot', 'shield', 'speed'];
                const type = types[Math.floor(Math.random() * types.length)];
                const maxX = canvas ? canvas.width - 30 : 760;
                
                game.powerUps.push({
                    x: Math.random() * maxX,
                    y: -30,
                    width: 30,
                    height: 30,
                    speed: 2,
                    type
                });
            };

            const checkCollision = (a, b) => {
                return a.x < b.x + b.width &&
                       a.x + a.width > b.x &&
                       a.y < b.y + b.height &&
                       a.y + a.height > b.y;
            };

            const gameLoop = useCallback(() => {
                if (gameState !== 'playing') return;

                const canvas = canvasRef.current;
                if (!canvas) return;

                const ctx = canvas.getContext('2d');
                const game = gameRef.current;
                const { player, keys } = game;

                // Clear canvas
                ctx.fillStyle = '#000814';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Draw star background
                ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                for (let i = 0; i < 100; i++) {
                    const x = (i * 37) % 800;
                    const y = ((i * 73 + Date.now() * 0.02) % 600);
                    ctx.fillRect(x, y, 1, 1);
                }

                // Update and draw particles
                game.particles = game.particles.filter(p => {
                    p.x += p.vx;
                    p.y += p.vy;
                    p.life--;
                    
                    if (p.life > 0) {
                        ctx.fillStyle = p.color;
                        ctx.globalAlpha = p.life / 30;
                        ctx.fillRect(p.x, p.y, p.size, p.size);
                        ctx.globalAlpha = 1;
                        return true;
                    }
                    return false;
                });

                // Update invulnerability timer
                if (player && player.invulnerable > 0) {
                    player.invulnerable--;
                }

                // Player movement
                if (player) {
                    if (keys.ArrowLeft && player.x > 0) player.x -= player.speed;
                    if (keys.ArrowRight && player.x < canvas.width - player.width) player.x += player.speed;
                    if (keys.ArrowUp && player.y > 0) player.y -= player.speed;
                    if (keys.ArrowDown && player.y < canvas.height - player.height) player.y += player.speed;

                    // Draw player (piscar quando invulner√°vel)
                    ctx.save();
                    ctx.translate(player.x + player.width / 2, player.y + player.height / 2);
                
                if (player.invulnerable <= 0 || Math.floor(player.invulnerable / 10) % 2 === 0) {
                    if (game.shieldActive) {
                        ctx.strokeStyle = '#00ff88';
                        ctx.lineWidth = 3;
                        ctx.beginPath();
                        ctx.arc(0, 0, player.width / 2 + 10, 0, Math.PI * 2);
                        ctx.stroke();
                    }
                    
                    ctx.fillStyle = '#ff006e';
                    ctx.beginPath();
                    ctx.moveTo(0, -player.height / 2);
                    ctx.lineTo(-player.width / 2, player.height / 2);
                    ctx.lineTo(0, player.height / 3);
                    ctx.lineTo(player.width / 2, player.height / 2);
                    ctx.closePath();
                    ctx.fill();
                    
                    ctx.fillStyle = '#ffbe0b';
                    ctx.fillRect(-4, player.height / 3, 8, 8);
                }
                ctx.restore();
                }

                // Update and draw bullets
                game.bullets = game.bullets.filter(bullet => {
                    bullet.y -= bullet.speed;
                    
                    ctx.fillStyle = bullet.color;
                    ctx.shadowColor = bullet.color;
                    ctx.shadowBlur = 10;
                    ctx.fillRect(bullet.x, bullet.y, bullet.width, bullet.height);
                    ctx.shadowBlur = 0;
                    
                    return bullet.y > -bullet.height;
                });

                // Spawn enemies
                game.enemySpawnTimer++;
                if (game.enemySpawnTimer > 60) {
                    spawnEnemy();
                    game.enemySpawnTimer = 0;
                }

                // Update and draw enemies
                game.enemies = game.enemies.filter(enemy => {
                    enemy.y += enemy.speed;

                    // Enemy shooting
                    enemy.shootTimer--;
                    if (enemy.shootTimer <= 0) {
                        game.bullets.push({
                            x: enemy.x + enemy.width / 2,
                            y: enemy.y + enemy.height,
                            width: 4,
                            height: 12,
                            speed: -6,
                            color: '#ff006e',
                            isEnemy: true
                        });
                        enemy.shootTimer = 90 + Math.random() * 60;
                    }

                    ctx.fillStyle = '#8338ec';
                    ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
                    ctx.fillStyle = '#3a86ff';
                    ctx.fillRect(enemy.x + 5, enemy.y + 5, enemy.width - 10, enemy.height - 10);

                    // Check bullet collisions with enemies
                    for (let i = game.bullets.length - 1; i >= 0; i--) {
                        const bullet = game.bullets[i];
                        if (!bullet.isEnemy && checkCollision(bullet, enemy)) {
                            game.bullets.splice(i, 1);
                            enemy.health--;
                            
                            createParticles(enemy.x + enemy.width / 2, enemy.y + enemy.height / 2, '#8338ec', 5);
                            
                            if (enemy.health <= 0) {
                                createParticles(enemy.x + enemy.width / 2, enemy.y + enemy.height / 2, '#8338ec', 15);
                                setScore(s => s + 100);
                                return false;
                            }
                        }
                    }

                    return enemy.y < canvas.height + 50;
                });

                // Spawn asteroids
                game.asteroidSpawnTimer++;
                if (game.asteroidSpawnTimer > 80) {
                    spawnAsteroid();
                    game.asteroidSpawnTimer = 0;
                }

                // Update and draw asteroids
                game.asteroids = game.asteroids.filter(asteroid => {
                    asteroid.y += asteroid.speed;
                    asteroid.rotation += asteroid.rotationSpeed;

                    ctx.save();
                    ctx.translate(asteroid.x + asteroid.width / 2, asteroid.y + asteroid.height / 2);
                    ctx.rotate(asteroid.rotation);
                    ctx.fillStyle = '#6c757d';
                    ctx.fillRect(-asteroid.width / 2, -asteroid.height / 2, asteroid.width, asteroid.height);
                    ctx.fillStyle = '#495057';
                    ctx.fillRect(-asteroid.width / 3, -asteroid.height / 3, asteroid.width * 0.66, asteroid.height * 0.66);
                    ctx.restore();

                    // Check bullet collisions with asteroids
                    for (let i = game.bullets.length - 1; i >= 0; i--) {
                        const bullet = game.bullets[i];
                        if (!bullet.isEnemy && checkCollision(bullet, asteroid)) {
                            game.bullets.splice(i, 1);
                            createParticles(asteroid.x + asteroid.width / 2, asteroid.y + asteroid.height / 2, '#6c757d', 10);
                            setScore(s => s + 50);
                            return false;
                        }
                    }

                    return asteroid.y < canvas.height + 50;
                });

                // Check enemy bullet collisions with player (apenas se n√£o estiver invulner√°vel)
                for (let i = game.bullets.length - 1; i >= 0; i--) {
                    const bullet = game.bullets[i];
                    if (bullet.isEnemy && player && checkCollision(bullet, player) && player.invulnerable <= 0) {
                        game.bullets.splice(i, 1);
                        
                        if (!game.shieldActive) {
                            player.invulnerable = 120; // 2 segundos de invulnerabilidade
                            setLives(l => {
                                const newLives = l - 1;
                                if (newLives <= 0) {
                                    setGameState('gameOver');
                                    if (score > highScore) {
                                        setHighScore(score);
                                        saveHighScore(score);
                                    }
                                }
                                return newLives;
                            });
                            createParticles(player.x + player.width / 2, player.y + player.height / 2, '#ff006e', 20);
                        } else {
                            createParticles(player.x + player.width / 2, player.y + player.height / 2, '#00ff88', 10);
                        }
                    }
                }

                // Check collisions with enemies and asteroids (apenas se n√£o estiver invulner√°vel)
                [...game.enemies, ...game.asteroids].forEach(obj => {
                    if (player && checkCollision(player, obj) && player.invulnerable <= 0) {
                        if (!game.shieldActive) {
                            player.invulnerable = 120; // 2 segundos de invulnerabilidade
                            setLives(l => {
                                const newLives = l - 1;
                                if (newLives <= 0) {
                                    setGameState('gameOver');
                                    if (score > highScore) {
                                        setHighScore(score);
                                        saveHighScore(score);
                                    }
                                }
                                return newLives;
                            });
                            createParticles(player.x + player.width / 2, player.y + player.height / 2, '#ff006e', 20);
                        }
                    }
                });

                // Spawn power-ups
                game.powerUpSpawnTimer++;
                if (game.powerUpSpawnTimer > 300) {
                    spawnPowerUp();
                    game.powerUpSpawnTimer = 0;
                }

                // Update and draw power-ups
                game.powerUps = game.powerUps.filter(powerUp => {
                    powerUp.y += powerUp.speed;

                    const colors = {
                        doubleShot: '#00ffff',
                        shield: '#00ff88',
                        speed: '#ffbe0b'
                    };

                    ctx.fillStyle = colors[powerUp.type];
                    ctx.shadowColor = colors[powerUp.type];
                    ctx.shadowBlur = 15;
                    ctx.beginPath();
                    ctx.arc(powerUp.x + powerUp.width / 2, powerUp.y + powerUp.height / 2, powerUp.width / 2, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.shadowBlur = 0;

                    // Check collision with player
                    if (checkCollision(player, powerUp)) {
                        createParticles(powerUp.x + powerUp.width / 2, powerUp.y + powerUp.height / 2, colors[powerUp.type], 15);
                        
                        if (powerUp.type === 'doubleShot') {
                            game.doubleShotActive = true;
                            game.powerUpTimer = 300;
                        } else if (powerUp.type === 'shield') {
                            game.shieldActive = true;
                            game.powerUpTimer = 400;
                        } else if (powerUp.type === 'speed') {
                            player.speed = 10;
                            game.powerUpTimer = 250;
                        }
                        
                        game.powerUpActive = powerUp.type;
                        return false;
                    }

                    return powerUp.y < canvas.height + 50;
                });

                // Handle power-up timers
                if (game.powerUpTimer > 0) {
                    game.powerUpTimer--;
                    if (game.powerUpTimer === 0) {
                        game.doubleShotActive = false;
                        game.shieldActive = false;
                        player.speed = 6;
                        game.powerUpActive = null;
                    }
                }

                gameLoopRef.current = requestAnimationFrame(gameLoop);
            }, [gameState, score, highScore]);

            useEffect(() => {
                if (gameState === 'playing') {
                    gameLoopRef.current = requestAnimationFrame(gameLoop);
                }
                return () => {
                    if (gameLoopRef.current) {
                        cancelAnimationFrame(gameLoopRef.current);
                    }
                };
            }, [gameState, gameLoop]);

            // Touch controls handlers
            const handleTouchStart = (direction) => {
                const game = gameRef.current;
                if (direction === 'left') game.keys.ArrowLeft = true;
                if (direction === 'right') game.keys.ArrowRight = true;
                if (direction === 'up') game.keys.ArrowUp = true;
                if (direction === 'down') game.keys.ArrowDown = true;
            };

            const handleTouchEnd = (direction) => {
                const game = gameRef.current;
                if (direction === 'left') game.keys.ArrowLeft = false;
                if (direction === 'right') game.keys.ArrowRight = false;
                if (direction === 'up') game.keys.ArrowUp = false;
                if (direction === 'down') game.keys.ArrowDown = false;
            };

            const handleShootTouch = () => {
                if (gameState === 'playing') {
                    shoot();
                }
            };

            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', ' '].includes(e.key)) {
                        e.preventDefault();
                    }
                    
                    gameRef.current.keys[e.key] = true;
                    
                    if (e.key === ' ' && gameState === 'playing') {
                        shoot();
                    }
                    
                    if (e.key === 'Escape' && gameState === 'playing') {
                        setGameState('paused');
                    } else if (e.key === 'Escape' && gameState === 'paused') {
                        setGameState('playing');
                    }
                };

                const handleKeyUp = (e) => {
                    gameRef.current.keys[e.key] = false;
                };

                window.addEventListener('keydown', handleKeyDown);
                window.addEventListener('keyup', handleKeyUp);

                return () => {
                    window.removeEventListener('keydown', handleKeyDown);
                    window.removeEventListener('keyup', handleKeyUp);
                };
            }, [gameState]);

            const getPowerUpIcon = () => {
                const game = gameRef.current;
                if (game.doubleShotActive) return React.createElement(IconZap, { style: { width: '20px', height: '20px' } });
                if (game.shieldActive) return React.createElement(IconShield, { style: { width: '20px', height: '20px' } });
                if (game.powerUpActive === 'speed') return React.createElement(IconRocket, { style: { width: '20px', height: '20px' } });
                return null;
            };

            return (
                <div style={{ minHeight: '100vh', background: 'linear-gradient(to bottom right, #0f172a, #581c87, #0f172a)', display: 'flex', alignItems: 'center', justifyContent: 'center', padding: '1rem', fontFamily: "'Press Start 2P', cursive" }}>
                    <div style={{ position: 'relative' }}>
                        {/* HUD */}
                        <div style={{ position: 'absolute', top: 0, left: 0, right: 0, display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', padding: '1rem', color: 'white', zIndex: 10, fontSize: '12px', pointerEvents: 'none' }}>
                            <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>
                                <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                                    <IconStar style={{ width: '16px', height: '16px', color: '#facc15' }} />
                                    <span style={{ color: '#22d3ee' }}>{score}</span>
                                </div>
                                <div style={{ display: 'flex', gap: '0.25rem' }}>
                                    {[...Array(lives)].map((_, i) => (
                                        <div key={i} style={{ width: '24px', height: '24px', backgroundColor: '#ef4444', border: '2px solid #fca5a5' }} />
                                    ))}
                                </div>
                            </div>
                            
                            {gameRef.current.powerUpActive && gameState === 'playing' && (
                                <div style={{ position: 'absolute', top: '1rem', left: '50%', transform: 'translateX(-50%)', backgroundColor: 'rgba(88, 28, 135, 0.9)', padding: '0.5rem 0.75rem', borderRadius: '4px', border: '2px solid #a855f7', display: 'flex', alignItems: 'center', gap: '0.5rem', animation: 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite', zIndex: 15 }}>
                                    {getPowerUpIcon()}
                                    <span style={{ fontSize: '12px' }}>{Math.ceil(gameRef.current.powerUpTimer / 60)}s</span>
                                </div>
                            )}
                            
                            <div style={{ textAlign: 'right', display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>
                                <div style={{ fontSize: '12px', color: '#9ca3af' }}>RECORDE</div>
                                <div style={{ color: '#facc15' }}>{highScore}</div>
                            </div>
                        </div>

                        <canvas
                            ref={canvasRef}
                            width={canvasSize.width}
                            height={canvasSize.height}
                            style={{ border: '4px solid #06b6d4', boxShadow: '0 0 30px rgba(6, 182, 212, 0.5), 0 25px 50px -12px rgba(0, 0, 0, 0.25)', backgroundColor: '#020617', maxWidth: '100%', height: 'auto' }}
                        />

                        {/* Touch Controls for Mobile */}
                        {isMobile && gameState === 'playing' && (
                            <div className="touch-controls">
                                <div className="dpad">
                                    <button 
                                        className="up"
                                        onTouchStart={(e) => { e.preventDefault(); handleTouchStart('up'); }}
                                        onTouchEnd={(e) => { e.preventDefault(); handleTouchEnd('up'); }}
                                        onMouseDown={() => handleTouchStart('up')}
                                        onMouseUp={() => handleTouchEnd('up')}
                                        onMouseLeave={() => handleTouchEnd('up')}
                                    >‚Üë</button>
                                    <button 
                                        className="left"
                                        onTouchStart={(e) => { e.preventDefault(); handleTouchStart('left'); }}
                                        onTouchEnd={(e) => { e.preventDefault(); handleTouchEnd('left'); }}
                                        onMouseDown={() => handleTouchStart('left')}
                                        onMouseUp={() => handleTouchEnd('left')}
                                        onMouseLeave={() => handleTouchEnd('left')}
                                    >‚Üê</button>
                                    <button 
                                        className="down"
                                        onTouchStart={(e) => { e.preventDefault(); handleTouchStart('down'); }}
                                        onTouchEnd={(e) => { e.preventDefault(); handleTouchEnd('down'); }}
                                        onMouseDown={() => handleTouchStart('down')}
                                        onMouseUp={() => handleTouchEnd('down')}
                                        onMouseLeave={() => handleTouchEnd('down')}
                                    >‚Üì</button>
                                    <button 
                                        className="right"
                                        onTouchStart={(e) => { e.preventDefault(); handleTouchStart('right'); }}
                                        onTouchEnd={(e) => { e.preventDefault(); handleTouchEnd('right'); }}
                                        onMouseDown={() => handleTouchStart('right')}
                                        onMouseUp={() => handleTouchEnd('right')}
                                        onMouseLeave={() => handleTouchEnd('right')}
                                    >‚Üí</button>
                                </div>
                                <button 
                                    onTouchStart={(e) => { e.preventDefault(); handleShootTouch(); }}
                                    onMouseDown={handleShootTouch}
                                    style={{ alignSelf: 'flex-end' }}
                                >üî´</button>
                            </div>
                        )}

                        {/* Menu Overlay */}
                        {gameState === 'menu' && (
                            <div style={{ position: 'absolute', inset: 0, backgroundColor: 'rgba(0, 0, 0, 0.9)', display: 'flex', alignItems: 'center', justifyContent: 'center', backdropFilter: 'blur(4px)', zIndex: 20 }}>
                                <div style={{ textAlign: 'center', display: 'flex', flexDirection: 'column', gap: '1.5rem', padding: '2rem', maxWidth: '500px', width: '100%' }}>
                                    <h1 style={{ fontSize: '3rem', background: 'linear-gradient(to right, #22d3ee, #a855f7, #ec4899)', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent', backgroundClip: 'text', animation: 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite', lineHeight: '1.2' }}>
                                        SPACE<br/>SHOOTER
                                    </h1>
                                    
                                    <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem', fontSize: '12px', color: '#67e8f9' }}>
                                        <p>SETAS - Mover</p>
                                        <p>ESPA√áO - Atirar</p>
                                        <p>ESC - Pausar</p>
                                    </div>

                                    <div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'center', flexWrap: 'wrap', gap: '1rem', fontSize: '11px', backgroundColor: 'rgba(15, 23, 42, 0.5)', padding: '1rem', borderRadius: '4px', border: '2px solid #a855f7' }}>
                                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#22d3ee' }}>
                                            <IconZap style={{ width: '14px', height: '14px' }} />
                                            <span>Tiro Duplo</span>
                                        </div>
                                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#4ade80' }}>
                                            <IconShield style={{ width: '14px', height: '14px' }} />
                                            <span>Escudo</span>
                                        </div>
                                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#facc15' }}>
                                            <IconRocket style={{ width: '14px', height: '14px' }} />
                                            <span>Velocidade</span>
                                        </div>
                                    </div>

                                    <button
                                        onClick={startGame}
                                        style={{ background: 'linear-gradient(to right, #06b6d4, #9333ea)', color: 'white', padding: '1rem 2rem', fontSize: '14px', border: '4px solid white', boxShadow: '0 0 20px rgba(168, 85, 247, 0.5)', cursor: 'pointer', transition: 'all 0.3s', alignSelf: 'center' }}
                                        onMouseEnter={(e) => { e.target.style.transform = 'scale(1.1)'; e.target.style.background = 'linear-gradient(to right, #22d3ee, #a855f7)'; }}
                                        onMouseLeave={(e) => { e.target.style.transform = 'scale(1)'; e.target.style.background = 'linear-gradient(to right, #06b6d4, #9333ea)'; }}
                                        onMouseDown={(e) => { e.target.style.transform = 'scale(0.95)'; }}
                                        onMouseUp={(e) => { e.target.style.transform = 'scale(1.1)'; }}
                                    >
                                        INICIAR
                                    </button>
                                </div>
                            </div>
                        )}

                        {/* Pause Overlay */}
                        {gameState === 'paused' && (
                            <div style={{ position: 'absolute', inset: 0, backgroundColor: 'rgba(0, 0, 0, 0.8)', display: 'flex', alignItems: 'center', justifyContent: 'center', backdropFilter: 'blur(4px)' }}>
                                <div style={{ textAlign: 'center', display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>
                                    <h2 style={{ fontSize: '2.25rem', color: '#22d3ee', animation: 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite' }}>PAUSADO</h2>
                                    <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>
                                        <button
                                            onClick={() => setGameState('playing')}
                                            style={{ width: '100%', backgroundColor: '#0891b2', color: 'white', padding: '0.75rem 1.5rem', fontSize: '12px', border: '2px solid #67e8f9', cursor: 'pointer', transition: 'background-color 0.3s' }}
                                            onMouseEnter={(e) => { e.target.style.backgroundColor = '#06b6d4'; }}
                                            onMouseLeave={(e) => { e.target.style.backgroundColor = '#0891b2'; }}
                                        >
                                            CONTINUAR
                                        </button>
                                        <button
                                            onClick={() => setGameState('menu')}
                                            style={{ width: '100%', backgroundColor: '#9333ea', color: 'white', padding: '0.75rem 1.5rem', fontSize: '12px', border: '2px solid #c084fc', cursor: 'pointer', transition: 'background-color 0.3s' }}
                                            onMouseEnter={(e) => { e.target.style.backgroundColor = '#a855f7'; }}
                                            onMouseLeave={(e) => { e.target.style.backgroundColor = '#9333ea'; }}
                                        >
                                            MENU
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Game Over Overlay */}
                        {gameState === 'gameOver' && (
                            <div style={{ position: 'absolute', inset: 0, backgroundColor: 'rgba(0, 0, 0, 0.9)', display: 'flex', alignItems: 'center', justifyContent: 'center', backdropFilter: 'blur(4px)' }}>
                                <div style={{ textAlign: 'center', display: 'flex', flexDirection: 'column', gap: '1.5rem', padding: '2rem' }}>
                                    <h2 style={{ fontSize: '2.25rem', color: '#ef4444', animation: 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite' }}>GAME OVER</h2>
                                    
                                    <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem', fontSize: '1.25rem' }}>
                                        <div>
                                            <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '0.25rem' }}>PONTUA√á√ÉO</div>
                                            <div style={{ color: '#22d3ee' }}>{score}</div>
                                        </div>
                                        
                                        {score === highScore && score > 0 && (
                                            <div style={{ color: '#facc15', fontSize: '14px', animation: 'bounce 1s infinite' }}>
                                                üèÜ NOVO RECORDE! üèÜ
                                            </div>
                                        )}
                                        
                                        <div>
                                            <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '0.25rem' }}>RECORDE</div>
                                            <div style={{ color: '#facc15' }}>{highScore}</div>
                                        </div>
                                    </div>

                                    <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem', paddingTop: '1rem' }}>
                                        <button
                                            onClick={startGame}
                                            style={{ width: '100%', background: 'linear-gradient(to right, #16a34a, #0891b2)', color: 'white', padding: '0.75rem 2rem', fontSize: '12px', border: '2px solid white', cursor: 'pointer', transition: 'all 0.3s' }}
                                            onMouseEnter={(e) => { e.target.style.transform = 'scale(1.05)'; e.target.style.background = 'linear-gradient(to right, #22c55e, #06b6d4)'; }}
                                            onMouseLeave={(e) => { e.target.style.transform = 'scale(1)'; e.target.style.background = 'linear-gradient(to right, #16a34a, #0891b2)'; }}
                                        >
                                            JOGAR NOVAMENTE
                                        </button>
                                        <button
                                            onClick={() => setGameState('menu')}
                                            style={{ width: '100%', backgroundColor: '#7e22ce', color: 'white', padding: '0.75rem 2rem', fontSize: '12px', border: '2px solid #a855f7', cursor: 'pointer', transition: 'background-color 0.3s' }}
                                            onMouseEnter={(e) => { e.target.style.backgroundColor = '#9333ea'; }}
                                            onMouseLeave={(e) => { e.target.style.backgroundColor = '#7e22ce'; }}
                                        >
                                            MENU
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

            ReactDOM.render(React.createElement(SpaceShooter), document.getElementById('root'));
            hideLoading();
        }
        
        // Start initialization
        initGame();
    </script>
</body>
</html>

