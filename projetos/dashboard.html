<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Interativo - Dev Brayan</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0f;
            min-height: 100vh;
            padding: 20px;
            color: #e4e4e7;
        }

        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .dashboard-header {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .dashboard-header h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .dashboard-header p {
            color: #a1a1aa;
            font-size: 1.1rem;
        }

        .filters-section {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            align-items: center;
            transition: all 0.3s ease;
        }

        .filters-section.filter-active {
            border-color: rgba(102, 126, 234, 0.5);
            box-shadow: 0 20px 60px rgba(102, 126, 234, 0.3);
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filter-group label {
            font-weight: 600;
            color: #a1a1aa;
            font-size: 0.9rem;
        }

        .filter-group select,
        .filter-group input {
            padding: 12px 16px;
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: rgba(10, 10, 15, 0.8);
            color: #e4e4e7;
            cursor: pointer;
        }

        .filter-group select:hover,
        .filter-group input:hover {
            border-color: rgba(102, 126, 234, 0.6);
            background: rgba(10, 10, 15, 1);
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
            background: rgba(10, 10, 15, 1);
        }

        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .kpi-card {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        }

        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 70px rgba(102, 126, 234, 0.4);
            border-color: rgba(102, 126, 234, 0.5);
        }

        .kpi-card.updating {
            animation: pulse 0.6s ease;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .kpi-title {
            font-size: 0.9rem;
            color: #a1a1aa;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .kpi-value {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .kpi-value.updating {
            animation: valueUpdate 0.5s ease;
        }

        @keyframes valueUpdate {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .kpi-change {
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .kpi-change.positive {
            color: #10b981;
        }

        .kpi-change.negative {
            color: #ef4444;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
        }

        .chart-card:hover {
            transform: translateY(-5px);
            border-color: rgba(102, 126, 234, 0.4);
            box-shadow: 0 25px 70px rgba(102, 126, 234, 0.3);
        }

        .chart-card.updating {
            animation: chartUpdate 0.5s ease;
        }

        @keyframes chartUpdate {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .chart-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #e4e4e7;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        .full-width-chart {
            grid-column: 1 / -1;
        }

        .full-width-chart .chart-container {
            height: 400px;
        }

        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }

            .kpi-grid {
                grid-template-columns: 1fr;
            }

            .filters-section {
                flex-direction: column;
                align-items: stretch;
            }

            .dashboard-header h1 {
                font-size: 2rem;
            }
        }

        .reset-btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .reset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .reset-btn:active {
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="dashboard-header">
            <h1>üìä Dashboard Interativo</h1>
            <p>An√°lise de dados em tempo real com gr√°ficos e indicadores</p>
        </div>

        <div class="filters-section" id="filtersSection">
            <div class="filter-group">
                <label for="periodFilter">Per√≠odo</label>
                <select id="periodFilter">
                    <option value="all">Todos os Per√≠odos</option>
                    <option value="today">Hoje</option>
                    <option value="week">Esta Semana</option>
                    <option value="month">Este M√™s</option>
                    <option value="quarter">Este Trimestre</option>
                    <option value="year">Este Ano</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="categoryFilter">Categoria</label>
                <select id="categoryFilter">
                    <option value="all">Todas as Categorias</option>
                    <option value="sales">Vendas</option>
                    <option value="marketing">Marketing</option>
                    <option value="support">Suporte</option>
                    <option value="development">Desenvolvimento</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="regionFilter">Regi√£o</label>
                <select id="regionFilter">
                    <option value="all">Todas as Regi√µes</option>
                    <option value="north">Norte</option>
                    <option value="south">Sul</option>
                    <option value="east">Leste</option>
                    <option value="west">Oeste</option>
                    <option value="center">Centro</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="dateRange">Data Inicial</label>
                <input type="date" id="dateRange" />
            </div>

            <div class="filter-group" style="align-self: flex-end;">
                <button class="reset-btn" onclick="resetFilters()">üîÑ Resetar Filtros</button>
            </div>
        </div>

        <div class="kpi-grid">
            <div class="kpi-card" id="kpiCardSales">
                <div class="kpi-title">Total de Vendas</div>
                <div class="kpi-value" id="kpiSales">R$ 0</div>
                <div class="kpi-change positive">
                    <span>‚Üë</span> <span id="kpiSalesChange">+12.5%</span> vs per√≠odo anterior
                </div>
            </div>

            <div class="kpi-card" id="kpiCardUsers">
                <div class="kpi-title">Usu√°rios Ativos</div>
                <div class="kpi-value" id="kpiUsers">0</div>
                <div class="kpi-change positive">
                    <span>‚Üë</span> <span id="kpiUsersChange">+8.3%</span> vs per√≠odo anterior
                </div>
            </div>

            <div class="kpi-card" id="kpiCardConversion">
                <div class="kpi-title">Taxa de Convers√£o</div>
                <div class="kpi-value" id="kpiConversion">0%</div>
                <div class="kpi-change positive">
                    <span>‚Üë</span> <span id="kpiConversionChange">+2.1%</span> vs per√≠odo anterior
                </div>
            </div>

            <div class="kpi-card" id="kpiCardTicket">
                <div class="kpi-title">Ticket M√©dio</div>
                <div class="kpi-value" id="kpiTicket">R$ 0</div>
                <div class="kpi-change negative">
                    <span>‚Üì</span> <span id="kpiTicketChange">-1.2%</span> vs per√≠odo anterior
                </div>
            </div>
        </div>

        <div class="charts-grid">
            <div class="chart-card" id="pieChartCard">
                <div class="chart-title">Vendas por Categoria</div>
                <div class="chart-container">
                    <canvas id="pieChart"></canvas>
                </div>
            </div>

            <div class="chart-card" id="barChartCard">
                <div class="chart-title">Vendas Mensais</div>
                <div class="chart-container">
                    <canvas id="barChart"></canvas>
                </div>
            </div>

            <div class="chart-card" id="lineChartCard">
                <div class="chart-title">Evolu√ß√£o de Vendas</div>
                <div class="chart-container">
                    <canvas id="lineChart"></canvas>
                </div>
            </div>

            <div class="chart-card" id="doughnutChartCard">
                <div class="chart-title">Distribui√ß√£o por Regi√£o</div>
                <div class="chart-container">
                    <canvas id="doughnutChart"></canvas>
                </div>
            </div>

            <div class="chart-card full-width-chart" id="mixedChartCard">
                <div class="chart-title">An√°lise Comparativa</div>
                <div class="chart-container">
                    <canvas id="mixedChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dados iniciais
        let dashboardData = {
            sales: 125000,
            users: 3420,
            conversion: 3.8,
            ticket: 365,
            salesChange: 12.5,
            usersChange: 8.3,
            conversionChange: 2.1,
            ticketChange: -1.2,
            selectedMonth: null
        };

        // Gr√°ficos
        let pieChart, barChart, lineChart, doughnutChart, mixedChart;

        // Cores para tema dark
        const colors = {
            primary: 'rgba(102, 126, 234, 0.8)',
            secondary: 'rgba(118, 75, 162, 0.8)',
            accent: 'rgba(236, 72, 153, 0.8)',
            warning: 'rgba(251, 146, 60, 0.8)',
            success: 'rgba(34, 197, 94, 0.8)',
            text: '#e4e4e7',
            grid: 'rgba(255, 255, 255, 0.05)',
            border: 'rgba(102, 126, 234, 0.2)'
        };

        // Inicializar gr√°ficos
        function initCharts() {
            // Gr√°fico de Pizza
            const pieCtx = document.getElementById('pieChart').getContext('2d');
            pieChart = new Chart(pieCtx, {
                type: 'pie',
                data: {
                    labels: ['Vendas', 'Marketing', 'Suporte', 'Desenvolvimento'],
                    datasets: [{
                        data: [45, 25, 20, 10],
                        backgroundColor: [
                            colors.primary,
                            colors.secondary,
                            colors.accent,
                            colors.warning
                        ],
                        borderWidth: 2,
                        borderColor: '#0a0a0f'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                font: { size: 12 },
                                color: colors.text
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.9)',
                            padding: 12,
                            titleFont: { size: 14 },
                            bodyFont: { size: 12 },
                            titleColor: colors.text,
                            bodyColor: colors.text,
                            borderColor: colors.border,
                            borderWidth: 1
                        }
                    }
                }
            });

            // Gr√°fico de Barras com interatividade
            const barCtx = document.getElementById('barChart').getContext('2d');
            barChart = new Chart(barCtx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'],
                    datasets: [{
                        label: 'Vendas (R$)',
                        data: [85000, 92000, 78000, 105000, 112000, 125000],
                        backgroundColor: colors.primary,
                        borderColor: '#667eea',
                        borderWidth: 2,
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    onClick: (event, elements) => {
                        if (elements.length > 0) {
                            const index = elements[0].index;
                            const month = barChart.data.labels[index];
                            selectMonth(index, month);
                        }
                    },
                    onHover: (event, elements) => {
                        event.native.target.style.cursor = elements.length > 0 ? 'pointer' : 'default';
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.9)',
                            padding: 12,
                            titleColor: colors.text,
                            bodyColor: colors.text,
                            borderColor: colors.border,
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return 'R$ ' + (value / 1000) + 'k';
                                },
                                color: colors.text
                            },
                            grid: { color: colors.grid }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: colors.text }
                        }
                    }
                }
            });

            // Gr√°fico de Linha
            const lineCtx = document.getElementById('lineChart').getContext('2d');
            lineChart = new Chart(lineCtx, {
                type: 'line',
                data: {
                    labels: ['Sem 1', 'Sem 2', 'Sem 3', 'Sem 4', 'Sem 5', 'Sem 6'],
                    datasets: [{
                        label: 'Vendas',
                        data: [18000, 22000, 19000, 25000, 28000, 30000],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 5,
                        pointHoverRadius: 8,
                        pointBackgroundColor: '#0a0a0f',
                        pointBorderColor: '#667eea',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.9)',
                            padding: 12,
                            titleColor: colors.text,
                            bodyColor: colors.text,
                            borderColor: colors.border,
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: colors.grid },
                            ticks: { color: colors.text }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: colors.text }
                        }
                    }
                }
            });

            // Gr√°fico de Rosca
            const doughnutCtx = document.getElementById('doughnutChart').getContext('2d');
            doughnutChart = new Chart(doughnutCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Norte', 'Sul', 'Leste', 'Oeste', 'Centro'],
                    datasets: [{
                        data: [30, 25, 20, 15, 10],
                        backgroundColor: [
                            colors.primary,
                            colors.secondary,
                            colors.accent,
                            colors.warning,
                            colors.success
                        ],
                        borderWidth: 2,
                        borderColor: '#0a0a0f'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                font: { size: 12 },
                                color: colors.text
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.9)',
                            padding: 12,
                            titleColor: colors.text,
                            bodyColor: colors.text,
                            borderColor: colors.border,
                            borderWidth: 1
                        }
                    }
                }
            });

            // Gr√°fico Misto
            const mixedCtx = document.getElementById('mixedChart').getContext('2d');
            mixedChart = new Chart(mixedCtx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'],
                    datasets: [
                        {
                            type: 'bar',
                            label: 'Vendas',
                            data: [85000, 92000, 78000, 105000, 112000, 125000],
                            backgroundColor: colors.primary,
                            borderColor: '#667eea',
                            borderWidth: 2,
                            borderRadius: 8
                        },
                        {
                            type: 'line',
                            label: 'Meta',
                            data: [80000, 85000, 90000, 95000, 100000, 110000],
                            borderColor: '#ec4899',
                            backgroundColor: 'rgba(236, 72, 153, 0.1)',
                            borderWidth: 3,
                            fill: false,
                            tension: 0.4,
                            pointRadius: 5,
                            pointHoverRadius: 8,
                            pointBackgroundColor: '#0a0a0f',
                            pointBorderColor: '#ec4899',
                            pointBorderWidth: 2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    onClick: (event, elements) => {
                        if (elements.length > 0 && elements[0].datasetIndex === 0) {
                            const index = elements[0].index;
                            const month = mixedChart.data.labels[index];
                            selectMonth(index, month);
                        }
                    },
                    onHover: (event, elements) => {
                        event.native.target.style.cursor = elements.length > 0 && elements[0].datasetIndex === 0 ? 'pointer' : 'default';
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                padding: 15,
                                font: { size: 12 },
                                color: colors.text
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.9)',
                            padding: 12,
                            titleColor: colors.text,
                            bodyColor: colors.text,
                            borderColor: colors.border,
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return 'R$ ' + (value / 1000) + 'k';
                                },
                                color: colors.text
                            },
                            grid: { color: colors.grid }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: colors.text }
                        }
                    }
                }
            });
        }

        // Selecionar m√™s e atualizar tudo
        function selectMonth(index, month) {
            dashboardData.selectedMonth = index;
            
            // Dados do m√™s selecionado
            const monthData = {
                sales: [85000, 92000, 78000, 105000, 112000, 125000][index],
                users: [2800, 3000, 2600, 3200, 3400, 3420][index],
                conversion: [3.2, 3.5, 3.0, 3.8, 4.0, 3.8][index],
                ticket: [303, 306, 300, 328, 329, 365][index]
            };

            // Atualizar KPIs com anima√ß√£o
            animateKPIUpdate('kpiCardSales', () => {
                dashboardData.sales = monthData.sales;
                updateKPIs();
            });

            animateKPIUpdate('kpiCardUsers', () => {
                dashboardData.users = monthData.users;
                updateKPIs();
            });

            animateKPIUpdate('kpiCardConversion', () => {
                dashboardData.conversion = monthData.conversion;
                updateKPIs();
            });

            animateKPIUpdate('kpiCardTicket', () => {
                dashboardData.ticket = monthData.ticket;
                updateKPIs();
            });

            // Destacar barra selecionada
            highlightBar(index);
            
            // Atualizar outros gr√°ficos baseado no m√™s
            updateChartsForMonth(index);
        }

        // Destacar barra selecionada
        function highlightBar(index) {
            if (barChart) {
                const colors = barChart.data.datasets[0].backgroundColor;
                barChart.data.datasets[0].backgroundColor = colors.map((color, i) => 
                    i === index ? '#667eea' : 'rgba(102, 126, 234, 0.5)'
                );
                barChart.update('active');
            }

            if (mixedChart) {
                const colors = mixedChart.data.datasets[0].backgroundColor;
                mixedChart.data.datasets[0].backgroundColor = colors.map((color, i) => 
                    i === index ? '#667eea' : 'rgba(102, 126, 234, 0.5)'
                );
                mixedChart.update('active');
            }
        }

        // Atualizar gr√°ficos baseado no m√™s selecionado
        function updateChartsForMonth(monthIndex) {
            // Atualizar gr√°fico de linha com dados do m√™s
            if (lineChart) {
                const weekData = [
                    [15000, 18000, 16000, 20000, 22000, 24000],
                    [16000, 19000, 17000, 21000, 23000, 25000],
                    [14000, 17000, 15000, 19000, 21000, 23000],
                    [18000, 22000, 20000, 24000, 26000, 28000],
                    [19000, 23000, 21000, 25000, 27000, 29000],
                    [20000, 24000, 22000, 26000, 28000, 30000]
                ];
                lineChart.data.datasets[0].data = weekData[monthIndex] || weekData[5];
                animateChartUpdate('lineChartCard', () => {
                    lineChart.update('active');
                });
            }

            // Atualizar gr√°fico de pizza com distribui√ß√£o do m√™s
            if (pieChart) {
                const categoryData = [
                    [50, 20, 20, 10],
                    [45, 25, 20, 10],
                    [40, 30, 20, 10],
                    [55, 20, 15, 10],
                    [50, 25, 15, 10],
                    [45, 25, 20, 10]
                ];
                pieChart.data.datasets[0].data = categoryData[monthIndex] || categoryData[5];
                animateChartUpdate('pieChartCard', () => {
                    pieChart.update('active');
                });
            }
        }

        // Animar atualiza√ß√£o de KPI
        function animateKPIUpdate(cardId, callback) {
            const card = document.getElementById(cardId);
            const value = card.querySelector('.kpi-value');
            
            card.classList.add('updating');
            value.classList.add('updating');
            
            setTimeout(() => {
                if (callback) callback();
                setTimeout(() => {
                    card.classList.remove('updating');
                    value.classList.remove('updating');
                }, 500);
            }, 100);
        }

        // Animar atualiza√ß√£o de gr√°fico
        function animateChartUpdate(cardId, callback) {
            const card = document.getElementById(cardId);
            card.classList.add('updating');
            
            setTimeout(() => {
                if (callback) callback();
                setTimeout(() => {
                    card.classList.remove('updating');
                }, 500);
            }, 100);
        }

        // Atualizar KPIs
        function updateKPIs() {
            document.getElementById('kpiSales').textContent = formatCurrency(dashboardData.sales);
            document.getElementById('kpiUsers').textContent = formatNumber(dashboardData.users);
            document.getElementById('kpiConversion').textContent = dashboardData.conversion.toFixed(1) + '%';
            document.getElementById('kpiTicket').textContent = formatCurrency(dashboardData.ticket);
            
            document.getElementById('kpiSalesChange').textContent = 
                (dashboardData.salesChange > 0 ? '+' : '') + dashboardData.salesChange.toFixed(1) + '%';
            document.getElementById('kpiUsersChange').textContent = 
                (dashboardData.usersChange > 0 ? '+' : '') + dashboardData.usersChange.toFixed(1) + '%';
            document.getElementById('kpiConversionChange').textContent = 
                (dashboardData.conversionChange > 0 ? '+' : '') + dashboardData.conversionChange.toFixed(1) + '%';
            document.getElementById('kpiTicketChange').textContent = 
                (dashboardData.ticketChange > 0 ? '+' : '') + dashboardData.ticketChange.toFixed(1) + '%';
        }

        // Formatar moeda
        function formatCurrency(value) {
            return 'R$ ' + value.toLocaleString('pt-BR');
        }

        // Formatar n√∫mero
        function formatNumber(value) {
            return value.toLocaleString('pt-BR');
        }

        // Aplicar filtros
        function applyFilters() {
            const period = document.getElementById('periodFilter').value;
            const category = document.getElementById('categoryFilter').value;
            const region = document.getElementById('regionFilter').value;

            // Animar se√ß√£o de filtros
            const filtersSection = document.getElementById('filtersSection');
            filtersSection.classList.add('filter-active');
            setTimeout(() => {
                filtersSection.classList.remove('filter-active');
            }, 600);

            // Simular mudan√ßas nos dados baseado nos filtros
            let multiplier = 1;
            if (period === 'today') multiplier = 0.1;
            else if (period === 'week') multiplier = 0.3;
            else if (period === 'month') multiplier = 0.5;
            else if (period === 'quarter') multiplier = 0.75;

            // Atualizar dados
            dashboardData.sales = Math.floor(125000 * multiplier);
            dashboardData.users = Math.floor(3420 * multiplier);
            dashboardData.conversion = 3.8 + (Math.random() * 0.5 - 0.25);
            dashboardData.ticket = Math.floor(365 * (0.9 + Math.random() * 0.2));

            // Atualizar KPIs com anima√ß√£o
            animateKPIUpdate('kpiCardSales', () => {
                updateKPIs();
            });
            animateKPIUpdate('kpiCardUsers', () => {
                updateKPIs();
            });
            animateKPIUpdate('kpiCardConversion', () => {
                updateKPIs();
            });
            animateKPIUpdate('kpiCardTicket', () => {
                updateKPIs();
            });

            // Atualizar gr√°ficos com novos dados
            updateCharts(period, category, region);
        }

        // Atualizar gr√°ficos
        function updateCharts(period, category, region) {
            // Atualizar gr√°fico de pizza
            if (pieChart) {
                const newData = generatePieData(category);
                pieChart.data.datasets[0].data = newData;
                animateChartUpdate('pieChartCard', () => {
                    pieChart.update('active');
                });
            }

            // Atualizar gr√°fico de barras
            if (barChart) {
                const newData = generateBarData(period);
                barChart.data.datasets[0].data = newData;
                // Resetar cores
                barChart.data.datasets[0].backgroundColor = colors.primary;
                animateChartUpdate('barChartCard', () => {
                    barChart.update('active');
                });
            }

            // Atualizar gr√°fico de linha
            if (lineChart) {
                const newData = generateLineData(period);
                lineChart.data.datasets[0].data = newData;
                animateChartUpdate('lineChartCard', () => {
                    lineChart.update('active');
                });
            }

            // Atualizar gr√°fico de rosca
            if (doughnutChart) {
                const newData = generateDoughnutData(region);
                doughnutChart.data.datasets[0].data = newData;
                animateChartUpdate('doughnutChartCard', () => {
                    doughnutChart.update('active');
                });
            }

            // Atualizar gr√°fico misto
            if (mixedChart) {
                const newBarData = generateBarData(period);
                const newLineData = generateLineData(period);
                mixedChart.data.datasets[0].data = newBarData;
                mixedChart.data.datasets[1].data = newLineData;
                // Resetar cores
                mixedChart.data.datasets[0].backgroundColor = colors.primary;
                animateChartUpdate('mixedChartCard', () => {
                    mixedChart.update('active');
                });
            }
        }

        // Gerar dados para gr√°fico de pizza
        function generatePieData(category) {
            const base = [45, 25, 20, 10];
            if (category === 'all') return base;
            
            const variations = {
                sales: [60, 20, 15, 5],
                marketing: [30, 50, 15, 5],
                support: [35, 20, 40, 5],
                development: [40, 20, 15, 25]
            };
            return variations[category] || base;
        }

        // Gerar dados para gr√°fico de barras
        function generateBarData(period) {
            const base = [85000, 92000, 78000, 105000, 112000, 125000];
            if (period === 'all') return base;
            
            const multiplier = period === 'today' ? 0.1 : 
                             period === 'week' ? 0.3 : 
                             period === 'month' ? 0.5 : 
                             period === 'quarter' ? 0.75 : 1;
            
            return base.map(val => Math.floor(val * multiplier));
        }

        // Gerar dados para gr√°fico de linha
        function generateLineData(period) {
            const base = [18000, 22000, 19000, 25000, 28000, 30000];
            if (period === 'all') return base;
            
            const multiplier = period === 'today' ? 0.1 : 
                             period === 'week' ? 0.3 : 
                             period === 'month' ? 0.5 : 
                             period === 'quarter' ? 0.75 : 1;
            
            return base.map(val => Math.floor(val * multiplier));
        }

        // Gerar dados para gr√°fico de rosca
        function generateDoughnutData(region) {
            const base = [30, 25, 20, 15, 10];
            if (region === 'all') return base;
            
            const variations = {
                north: [50, 15, 15, 10, 10],
                south: [15, 50, 15, 10, 10],
                east: [15, 15, 50, 10, 10],
                west: [15, 15, 15, 40, 15],
                center: [15, 15, 15, 15, 40]
            };
            return variations[region] || base;
        }

        // Resetar filtros
        function resetFilters() {
            document.getElementById('periodFilter').value = 'all';
            document.getElementById('categoryFilter').value = 'all';
            document.getElementById('regionFilter').value = 'all';
            document.getElementById('dateRange').value = '';
            
            dashboardData = {
                sales: 125000,
                users: 3420,
                conversion: 3.8,
                ticket: 365,
                salesChange: 12.5,
                usersChange: 8.3,
                conversionChange: 2.1,
                ticketChange: -1.2,
                selectedMonth: null
            };
            
            // Resetar cores das barras
            if (barChart) {
                barChart.data.datasets[0].backgroundColor = colors.primary;
            }
            if (mixedChart) {
                mixedChart.data.datasets[0].backgroundColor = colors.primary;
            }
            
            updateKPIs();
            updateCharts('all', 'all', 'all');
        }

        // Event listeners
        document.getElementById('periodFilter').addEventListener('change', applyFilters);
        document.getElementById('categoryFilter').addEventListener('change', applyFilters);
        document.getElementById('regionFilter').addEventListener('change', applyFilters);
        document.getElementById('dateRange').addEventListener('change', applyFilters);

        // Inicializar
        window.addEventListener('DOMContentLoaded', () => {
            initCharts();
            updateKPIs();
        });
    </script>
</body>
</html>
